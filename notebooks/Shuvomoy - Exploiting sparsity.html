<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="JuliaOpt - Optimization packages for the Julia language">
    <meta name="author" content="Iain Dunning">
    <link rel="icon" href="favicon.ico">

    <title>JuliaOpt - Optimization packages for the Julia language</title>

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">

    <!-- Additional styles -->
    <style>
      body {
        padding-top: 60px;
        padding-bottom: 20px;
      }
    </style>
    <style type="text/css">
    .highlight .hll { background-color: #ffffcc }
.highlight  { background: #f8f8f8; }
.highlight .c { color: #408080; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .cm { color: #408080; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #BC7A00 } /* Comment.Preproc */
.highlight .c1 { color: #408080; font-style: italic } /* Comment.Single */
.highlight .cs { color: #408080; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .gr { color: #FF0000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #00A000 } /* Generic.Inserted */
.highlight .go { color: #888888 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #7D9029 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #AA22FF } /* Name.Decorator */
.highlight .ni { color: #999999; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #D2413A; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0000FF } /* Name.Function */
.highlight .nl { color: #A0A000 } /* Name.Label */
.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #666666 } /* Literal.Number.Bin */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #BB6688 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */
    </style>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>

  <body>
    <div class="container">


      <!-- Static navbar -->
      <nav class="navbar navbar-default navbar-fixed-top">
        <div class="container-fluid">
          <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/index.html">JuliaOpt</a>
          </div>
          <div id="navbar" class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
              <li><a href="/index.html#about">About</a></li>
              <li><a href="/index.html#packages">Packages</a></li>
              <li><a href="/notebooks/index.html">Notebooks</a></li>
              <!--<li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">JuMP <span class="caret"></span></a>
                <ul class="dropdown-menu" role="menu">
                  <li><a href="#">Action</a></li>
                  <li><a href="#">Another action</a></li>
                  <li><a href="#">Something else here</a></li>
                  <li class="divider"></li>
                  <li class="dropdown-header">Nav header</li>
                  <li><a href="#">Separated link</a></li>
                  <li><a href="#">One more separated link</a></li>
                </ul>
              </li>-->
            </ul>
          </div><!--/.nav-collapse -->
        </div><!--/.container-fluid -->
      </nav>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>Description:</strong> This notebook describes how to make an optimization model more efficient by exploiting sparsity.</p>
<p><strong>Author:</strong> <a href="http://scg.utoronto.ca/~shuvomoy.dasgupta/">Shuvomoy Das Gupta</a></p>
<p><strong>License:</strong> <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" /></a><br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.</p>
<h1 id="Using-Julia+JuMP-for-optimization---exploiting-sparsity">Using Julia+JuMP for optimization - exploiting sparsity<a class="anchor-link" href="#Using-Julia+JuMP-for-optimization---exploiting-sparsity">&#182;</a></h1><hr>
<p><br></p>
<h2 id="Introduction">Introduction<a class="anchor-link" href="#Introduction">&#182;</a></h2><p><strong>What is a sparse data structure?</strong></p>
<p>A sparse data structure is one that has a lot of zeros in it. If a matrix has many more zeros than nonzeros, then it is a sparse matrix.</p>
<p><strong> Why do we need to exploit sparsity?</strong></p>
<ul>
<li><p>Sparsity in the input data increases with the dimension.</p>
</li>
<li><p>Exploiting sparsity</p>
<ul>
<li>keeps the data size small</li>
<li>saves memory</li>
<li>reduces the running time  </li>
<li>improves the efficiency of the model</li>
</ul>
</li>
</ul>
<p><strong> How to exploit sparsity in Julia?</strong></p>
<ul>
<li>Define <code>immutable type</code> and create a <code>dictionary</code> or an <code>array</code> of it.</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="A-test-example:-Transportation-Problem">A test example: Transportation Problem<a class="anchor-link" href="#A-test-example:-Transportation-Problem">&#182;</a></h2><p>Consider a transportation problem which is going to be our test example:</p>
<ul>
<li><p><strong> Problem setup:</strong> Some products have to transported from origin cities to destination cities</p>
</li>
<li><p><strong>Objective:</strong></p>
<ul>
<li>Minimize the total cost of shipment over all <strong>relevant</strong> routes</li>
</ul>
</li>
<li><p><strong>Decision Variables</strong></p>
<ul>
<li>Find the optimum amount of every product to be shipped from one city to another</li>
</ul>
</li>
<li><p><strong>Constraints</strong></p>
<ul>
<li>How much of a product a city can supply to other cities is fixed. </li>
<li>The amount of any product demanded by a city is also fixed. </li>
<li>The total amount of products shipped between every pair of different cities can not exceed a given limit. </li>
</ul>
</li>
</ul>
<p>Suppose there are ten cities and three products in our problem.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[1]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-julia"><pre><span class="n">cities</span> <span class="o">=</span> 
<span class="p">[</span>
<span class="p">:</span><span class="n">BANGKOK</span><span class="p">;</span> <span class="p">:</span><span class="n">LONDON</span><span class="p">;</span> <span class="p">:</span><span class="n">PARIS</span><span class="p">;</span> <span class="p">:</span><span class="n">SINGAPORE</span><span class="p">;</span>  <span class="p">:</span><span class="n">NEWYORK</span><span class="p">;</span>  <span class="p">:</span><span class="n">ISTANBUL</span><span class="p">;</span>  <span class="p">:</span><span class="n">DUBAI</span><span class="p">;</span>  <span class="p">:</span><span class="n">KUALALUMPUR</span><span class="p">;</span>  <span class="p">:</span><span class="n">HONGKONG</span><span class="p">;</span>  <span class="p">:</span><span class="n">BARCELONA</span> 
<span class="p">]</span>

<span class="n">products</span>   <span class="o">=</span> 
<span class="p">[</span>
<span class="p">:</span><span class="n">smartphone</span><span class="p">;</span> <span class="p">:</span><span class="n">tablet</span><span class="p">;</span> <span class="p">:</span><span class="n">laptop</span>
<span class="p">]</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">Out[1]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>3-element Array{Symbol,1}:
 :smartphone
 :tablet    
 :laptop    </pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Defining-immutable-type">Defining <code>immutable</code> type<a class="anchor-link" href="#Defining-immutable-type">&#182;</a></h2><p>If we do not exploit sparsity, then number of ways we can ship the products from one city to other will be $3 \times (^{10}P_2+10)=300$.</p>
<p>Clearly many of them will be redundant, because of reasons like</p>
<ul>
<li>a product might not be needed by a city</li>
<li>a product might not be produced by a city
etc.</li>
</ul>
<p>We just need to consider <em>relevant route</em>s, where a product can be shipped from one production city to the other demand city. So a <em>relevant route</em> can be defined by 3 features:</p>
<ul>
<li>a product</li>
<li>a city that produces that product</li>
<li>a city that demands that product</li>
</ul>
<p>So, we define an <code>immutable</code> type <code>Route</code> as follows:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[2]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-julia"><pre><span class="k">immutable</span> <span class="n">Route</span>
    <span class="n">p</span><span class="p">::</span><span class="n">Symbol</span> <span class="c"># p stands for product</span>
    <span class="n">o</span><span class="p">::</span><span class="n">Symbol</span> <span class="c"># o stands for origin</span>
    <span class="n">d</span><span class="p">::</span><span class="n">Symbol</span> <span class="c"># d stands for destination</span>
<span class="k">end</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Here the datatype <code>Symbol</code> is a special type of immutable string. Then we create an array of only relevant routes.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[3]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-julia"><pre><span class="n">routesExample</span> <span class="o">=</span> 
<span class="p">[</span>
  <span class="n">Route</span><span class="p">(:</span><span class="n">smartphone</span><span class="p">,:</span><span class="n">BANGKOK</span><span class="p">,:</span><span class="n">SINGAPORE</span><span class="p">);</span>
  <span class="n">Route</span><span class="p">(:</span><span class="n">smartphone</span><span class="p">,:</span><span class="n">BANGKOK</span><span class="p">,:</span><span class="n">NEWYORK</span><span class="p">);</span>
  <span class="n">Route</span><span class="p">(:</span><span class="n">smartphone</span><span class="p">,:</span><span class="n">BANGKOK</span><span class="p">,:</span><span class="n">ISTANBUL</span><span class="p">);</span>
  <span class="n">Route</span><span class="p">(:</span><span class="n">smartphone</span><span class="p">,:</span><span class="n">BANGKOK</span><span class="p">,:</span><span class="n">DUBAI</span><span class="p">);</span>
<span class="p">]</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">Out[3]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>4-element Array{Route,1}:
 Route(:smartphone,:BANGKOK,:SINGAPORE)
 Route(:smartphone,:BANGKOK,:NEWYORK)  
 Route(:smartphone,:BANGKOK,:ISTANBUL) 
 Route(:smartphone,:BANGKOK,:DUBAI)    </pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>If we want to access $i$th element of the array by typing in <code>routes[i]</code>. When we want to access the product name associated with the $it$h element of the array, we can do so by typing <code>routes[i].p</code>.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[4]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-julia"><pre><span class="n">routesExample</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="c"># Will give the second route</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">Out[4]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>Route(:smartphone,:BANGKOK,:NEWYORK)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[5]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-julia"><pre><span class="n">routesExample</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">.</span><span class="n">d</span> <span class="c"># Will give the demand city of the 4th route</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">Out[5]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>:DUBAI</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Creating-new-arrays-efficiently-from-existing-arrays">Creating new arrays efficiently from existing arrays<a class="anchor-link" href="#Creating-new-arrays-efficiently-from-existing-arrays">&#182;</a></h2><p>Often we need to create new arrays, where the elements of them are extracted from some already existing array conditionally.</p>
<p>Consider the immutable type <code>Supply</code></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[6]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-julia"><pre><span class="k">immutable</span> <span class="n">Supply</span>
    <span class="n">p</span><span class="p">::</span><span class="n">Symbol</span> <span class="c"># p stands for product name</span>
    <span class="n">o</span><span class="p">::</span><span class="n">Symbol</span> <span class="c"># o stands for the origin city</span>
<span class="k">end</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We want to create an array <code>suppliesExample</code>, that contains all relevant product-city pairs, where the particular product is produced in that city. Clearly we can construct this array by plucking each product and corresponding city producing it from <code>routesExample</code>. This is how we do it efficiently:</p>
<ul>
<li>Create a emty array of type <code>Supply</code></li>
<li><p>Add elements to this array by</p>
<ul>
<li>selecting the product and origin from the elements of <code>routes</code> </li>
<li><em>push</em>ing them one by one in <code>supplies</code></li>
</ul>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[7]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-julia"><pre><span class="n">suppliesExample</span> <span class="o">=</span> <span class="n">Supply</span><span class="p">[]</span> <span class="c"># Creates a 0 element array of immutable type Supply</span>
<span class="k">for</span> <span class="n">r</span> <span class="k">in</span> <span class="n">routesExample</span> <span class="c"># For every element of the route route</span>
    <span class="n">push</span><span class="o">!</span><span class="p">(</span><span class="n">suppliesExample</span><span class="p">,</span> <span class="n">Supply</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">p</span><span class="p">,</span> <span class="n">r</span><span class="o">.</span><span class="n">o</span><span class="p">))</span> <span class="c"># pick the product and origin city and push it in  supplies</span>
<span class="k">end</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[8]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-julia"><pre><span class="n">suppliesExample</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">Out[8]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>4-element Array{Supply,1}:
 Supply(:smartphone,:BANGKOK)
 Supply(:smartphone,:BANGKOK)
 Supply(:smartphone,:BANGKOK)
 Supply(:smartphone,:BANGKOK)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Dictionary">Dictionary<a class="anchor-link" href="#Dictionary">&#182;</a></h2><p><strong>What is a dictionary?</strong>
A dictionary is a data type which can be useful in exploiting sparsity.</p>
<p><strong>Why is it needed?</strong>
 Often we might be interested to index a variable by a composite data type, rather than a number.</p>
<p>For example, for the transportation problem in consideration, it would be more convenient to index the decision variables in the routes that are present. Let</p>
$$
\begin{align}
R=\{(p,o,d) \in P \times C \times C: \text{product } p \text{ has to be transported from city } o \text{ to city } d\}
\end{align}
$$<p>be the set of all the routes that are relevant for the problem. So, we can define our decision variables as below:</p>
$$
\begin{align}
\forall (p,o,d) \in R \left(x_{(p,o,d)}= \text{the amount of a product } p \text{ that is transported from city } o \text{ city d} \right)
\end{align}
$$<p>From a data structure point of view, $ \left(x_{(p,o,d)}\right)_{(p,o,d) \in R}$ is a dictionary which</p>
<ul>
<li>takes $(p,o,d) \in R$ as its <strong>key</strong> and </li>
<li>has the <strong>value</strong> the optimum amount of the product $p$ to be shipped from city $o$ to city $d$.</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Efficiently-Constructing-Dictionary-of-immutable-types">Efficiently Constructing Dictionary of <code>immutable</code> types<a class="anchor-link" href="#Efficiently-Constructing-Dictionary-of-immutable-types">&#182;</a></h3><p>Suppose we want to create a dictionary  called <code>costRoutes</code>. Every element of the dictionary <code>costRoutes</code> contains the value of shipping cost along a particular route belonging to the array <code>routesExample</code>. So,</p>
<ul>
<li>the <strong>key</strong> to an element belonging to the dictionary is a specific route belonging to the array <code>routesExample</code></li>
<li>the <strong>value</strong> is the cost for that shipment. </li>
</ul>
<p>Suppose the values of the costs are stored in an array named <code>costCofExample</code>.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[9]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-julia"><pre><span class="n">costCofExample</span> <span class="o">=</span> <span class="p">[</span><span class="mi">120</span><span class="p">;</span> <span class="mi">205</span><span class="p">;</span> <span class="mi">310</span><span class="p">;</span> <span class="mf">45.0</span><span class="p">]</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">Out[9]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>4-element Array{Float64,1}:
 120.0
 205.0
 310.0
  45.0</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We create the dictionary <code>costRoutes</code> similar to an array:</p>
<ul>
<li>we create an empty dictionary, and then</li>
<li>push the elements of the dictionary (the key and the corresponding value) one by one.</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[10]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-julia"><pre><span class="n">costRoutesExample</span><span class="o">=</span><span class="n">Dict</span><span class="p">{</span><span class="n">Route</span><span class="p">,</span> <span class="kt">Float64</span><span class="p">}()</span><span class="c"># Create an empty dictionary </span>
<span class="c"># where the key is Route and the value is Float64</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">Out[10]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>Dict{Route,Float64} with 0 entries</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[11]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-julia"><pre><span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="n">length</span><span class="p">(</span><span class="n">routesExample</span><span class="p">)]</span>
    <span class="n">push</span><span class="o">!</span><span class="p">(</span><span class="n">costRoutesExample</span><span class="p">,</span> <span class="n">routesExample</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">costCofExample</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> 
    <span class="c"># routesExample[i] is the key, and costCofExample[i] is the value</span>
<span class="k">end</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[12]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-julia"><pre><span class="n">costRoutesExample</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">Out[12]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>Dict{Route,Float64} with 4 entries:
  Route(:smartphone,:BANG… =&gt; 45.0
  Route(:smartphone,:BANG… =&gt; 120.0
  Route(:smartphone,:BANG… =&gt; 310.0
  Route(:smartphone,:BANG… =&gt; 205.0</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>After the dictionary is initialized, we can access the cost associated with some route <code>routes[i]</code> by typing in <code>costRoutes[routes[i]]</code></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[13]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-julia"><pre><span class="n">costRoutesExample</span><span class="p">[</span><span class="n">routesExample</span><span class="p">[</span><span class="mi">4</span><span class="p">]]</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">Out[13]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>45.0</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Or we can input the description of the route itself:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[14]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-julia"><pre><span class="n">routesExample</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">Out[14]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>Route(:smartphone,:BANGKOK,:ISTANBUL)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[15]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-julia"><pre><span class="n">costRoutesExample</span><span class="p">[</span><span class="n">Route</span><span class="p">(:</span><span class="n">smartphone</span><span class="p">,:</span><span class="n">BANGKOK</span><span class="p">,:</span><span class="n">ISTANBUL</span><span class="p">)]</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">Out[15]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>310.0</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Mathematical-representation-of-the-transportation-problem">Mathematical representation of the transportation problem<a class="anchor-link" href="#Mathematical-representation-of-the-transportation-problem">&#182;</a></h2><p>The problem is a classic transportation problem. We will consider the sparse representation of the problem. Let</p>
<p>$C=\text{Set of all cities}$</p>
<p>$P=\text{Set of all products}$</p>
<p>$R=\{(p,o,d) \in P \times C \times C: \text{product } p \text{ has to be transported from city } o \text{ to city } d\} $</p>
<p>$\forall (p,o,d) \in R \quad \left(c_{(p,o,d)} = \text{cost of transporting some product } p \text{ from city } o \text{ to city } d \right)$</p>
<p>$ \forall p \in P \quad \left(O_p = \text{Set of all origin cities where a product } p \text{ is produced}\right) $</p>
<p>$ \forall p \in P \quad \left(D_p = \text{Set of all destination cities where a product } p \text{
has to be delivered}\right) $</p>
<p>$ \forall p \in P \; \forall o \in O_p \quad \left(s_{(p,o)} = \text{the total amount of the product } p \text{ that can be supplied by city } o\right) $</p>
<p>$ \forall p \in P \; \forall d \in D_p \quad \left(d_{(p,d)} = \text{the total amount of the product } p \text{ that is demanded by city } d\right) $</p>
<p>Total amount of shipped product between each pair of cities cannot exceed $\gamma$</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The decision variable for this problem is</p>
$$
\begin{align}
\forall (p,o,d) \in R \quad \left(x_{(p,o,d)}= \text{the amount of a product } p \text{ that is trasported from city } o \text{ city d} \right)
\end{align}
$$
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The optimization problem can be described as below:</p>
$$
\begin{align}
&\text{minimize} && \sum_{(p,o,d) \in R}{c_{(p,o,d)} x_{(p,o,d)}} \\
&\text{subject to} && \\
&       && \forall p \in P \; \forall o \in O_p \quad \left(\sum_{d \in D_p} x_{(p,o,d)}=s_{(p,o)}\right) \\
&       && \text{ : The amount of any product a city can supply to other cities is fixed} \\
&       && \forall p \in P \; \forall d \in D_p \quad \left(\sum_{o \in O_p}{x_{(p,o,d)}}=d_{(p,d)}\right) \\
&       && \text{ : The amount of any product demanded by a city is also fixed.} \\
&       && \forall o \in C \; \forall d \in C \setminus \{o\} \quad 
            \left(\sum_{(p,\bar{o},\bar{d}) \in R \; : \; o=\bar{o} \wedge d=\bar{d}}{x_{(p,\bar{o},\bar{d})}}\leq \gamma\right) \\
&       && \text{ :The total amount of products shipped between every pair of different cities can not exceed a given limit.}
\end{align}
$$
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Mapping-of-the-mathematical-symbols-to-JuMP">Mapping of the mathematical symbols to JuMP<a class="anchor-link" href="#Mapping-of-the-mathematical-symbols-to-JuMP">&#182;</a></h1><p>In the data file, the symbols in the model above are mapped as follows:</p>
<table>
<thead><tr>
<th style="text-align:right">Mathematical Symbol</th>
<th style="text-align:right">In the code</th>
<th style="text-align:right">Comment</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">$C$</td>
<td style="text-align:right"><code>cities</code></td>
<td style="text-align:right"><code>cities</code> is an array of <code>Symbol</code>s</td>
</tr>
<tr>
<td style="text-align:right">$P$</td>
<td style="text-align:right"><code>products</code></td>
<td style="text-align:right"><code>products</code> is an array of <code>Symbol</code>s</td>
</tr>
<tr>
<td style="text-align:right">$R$</td>
<td style="text-align:right"><code>routes</code></td>
<td style="text-align:right"><code>routes</code> is an array of immutable type <code>Route</code></td>
</tr>
<tr>
<td style="text-align:right">$(O_p)_{p \in P}$</td>
<td style="text-align:right"><code>orig</code></td>
<td style="text-align:right"><code>orig</code> is a dictionary</td>
</tr>
<tr>
<td style="text-align:right">$(D_p)_{p \in P}$</td>
<td style="text-align:right"><code>dest</code></td>
<td style="text-align:right"><code>dest</code> is a dictionary</td>
</tr>
<tr>
<td style="text-align:right">$((s_{(p,o)})_{o \in O_p})_{p \in P}$</td>
<td style="text-align:right"><code>suppliedAmount</code></td>
<td style="text-align:right"><code>suppliedAmount</code> is a dictionary</td>
</tr>
<tr>
<td style="text-align:right">$((d_{(p,d)})_{d \in D_p})_{p \in P}$</td>
<td style="text-align:right"><code>demandedAmount</code></td>
<td style="text-align:right"><code>demandedAmount</code> is a dictionary with      key                                           <code>Customer</code> and value <code>Float64</code></td>
</tr>
<tr>
<td style="text-align:right">$(x_{(p,o,d)})_{(p,o,d) \in R}$</td>
<td style="text-align:right"><code>trans</code></td>
<td style="text-align:right"><code>trans</code> is a dictionary and the variable in the problem</td>
</tr>
<tr>
<td style="text-align:right">$(c_{(p,o,d)})_{(p,o,d) \in R}$</td>
<td style="text-align:right"><code>costRoutes</code></td>
<td style="text-align:right"><code>costRoutes</code> is a dictionary</td>
</tr>
<tr>
<td style="text-align:right">$\gamma$</td>
<td style="text-align:right"><code>capacity</code></td>
<td style="text-align:right">It is of type <code>Float64</code></td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Data-file">Data file<a class="anchor-link" href="#Data-file">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[16]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-julia"><pre><span class="c">#</span>
<span class="n">cities</span> <span class="o">=</span> 
<span class="p">[</span>
<span class="p">:</span><span class="n">BANGKOK</span><span class="p">;</span> <span class="p">:</span><span class="n">LONDON</span><span class="p">;</span> <span class="p">:</span><span class="n">PARIS</span><span class="p">;</span> <span class="p">:</span><span class="n">SINGAPORE</span><span class="p">;</span>  <span class="p">:</span><span class="n">NEWYORK</span><span class="p">;</span>  <span class="p">:</span><span class="n">ISTANBUL</span><span class="p">;</span>  <span class="p">:</span><span class="n">DUBAI</span><span class="p">;</span>  <span class="p">:</span><span class="n">KUALALUMPUR</span><span class="p">;</span>  <span class="p">:</span><span class="n">HONGKONG</span><span class="p">;</span>  <span class="p">:</span><span class="n">BARCELONA</span> 
<span class="p">]</span>

<span class="n">products</span>   <span class="o">=</span> 
<span class="p">[</span>
<span class="p">:</span><span class="n">smartphone</span><span class="p">;</span> <span class="p">:</span><span class="n">tablet</span><span class="p">;</span> <span class="p">:</span><span class="n">laptop</span>
<span class="p">]</span>

<span class="n">capacity</span>    <span class="o">=</span> <span class="mi">700</span>

<span class="k">immutable</span> <span class="n">Route</span>
    <span class="n">p</span><span class="p">::</span><span class="n">Symbol</span> <span class="c"># p stands for product</span>
    <span class="n">o</span><span class="p">::</span><span class="n">Symbol</span> <span class="c"># o stands for origin</span>
    <span class="n">d</span><span class="p">::</span><span class="n">Symbol</span> <span class="c"># d stands for destination</span>
<span class="k">end</span>

<span class="n">routes</span> <span class="o">=</span> 
<span class="p">[</span>
  <span class="n">Route</span><span class="p">(:</span><span class="n">smartphone</span><span class="p">,:</span><span class="n">BANGKOK</span><span class="p">,:</span><span class="n">SINGAPORE</span><span class="p">);</span>
  <span class="n">Route</span><span class="p">(:</span><span class="n">smartphone</span><span class="p">,:</span><span class="n">BANGKOK</span><span class="p">,:</span><span class="n">NEWYORK</span><span class="p">);</span>
  <span class="n">Route</span><span class="p">(:</span><span class="n">smartphone</span><span class="p">,:</span><span class="n">BANGKOK</span><span class="p">,:</span><span class="n">ISTANBUL</span><span class="p">);</span>
  <span class="n">Route</span><span class="p">(:</span><span class="n">smartphone</span><span class="p">,:</span><span class="n">BANGKOK</span><span class="p">,:</span><span class="n">DUBAI</span><span class="p">);</span>
  <span class="n">Route</span><span class="p">(:</span><span class="n">smartphone</span><span class="p">,:</span><span class="n">BANGKOK</span><span class="p">,:</span><span class="n">KUALALUMPUR</span><span class="p">);</span>
  <span class="n">Route</span><span class="p">(:</span><span class="n">smartphone</span><span class="p">,:</span><span class="n">BANGKOK</span><span class="p">,:</span><span class="n">HONGKONG</span><span class="p">);</span>
  <span class="n">Route</span><span class="p">(:</span><span class="n">smartphone</span><span class="p">,:</span><span class="n">BANGKOK</span><span class="p">,:</span><span class="n">BARCELONA</span><span class="p">);</span>
  <span class="n">Route</span><span class="p">(:</span><span class="n">smartphone</span><span class="p">,:</span><span class="n">LONDON</span><span class="p">,:</span><span class="n">SINGAPORE</span><span class="p">);</span>
  <span class="n">Route</span><span class="p">(:</span><span class="n">smartphone</span><span class="p">,:</span><span class="n">LONDON</span><span class="p">,:</span><span class="n">NEWYORK</span><span class="p">);</span>
  <span class="n">Route</span><span class="p">(:</span><span class="n">smartphone</span><span class="p">,:</span><span class="n">LONDON</span><span class="p">,:</span><span class="n">ISTANBUL</span><span class="p">);</span>
  <span class="n">Route</span><span class="p">(:</span><span class="n">smartphone</span><span class="p">,:</span><span class="n">LONDON</span><span class="p">,:</span><span class="n">DUBAI</span><span class="p">);</span>
  <span class="n">Route</span><span class="p">(:</span><span class="n">smartphone</span><span class="p">,:</span><span class="n">LONDON</span><span class="p">,:</span><span class="n">KUALALUMPUR</span><span class="p">);</span>
  <span class="n">Route</span><span class="p">(:</span><span class="n">smartphone</span><span class="p">,:</span><span class="n">LONDON</span><span class="p">,:</span><span class="n">HONGKONG</span><span class="p">);</span>
  <span class="n">Route</span><span class="p">(:</span><span class="n">smartphone</span><span class="p">,:</span><span class="n">LONDON</span><span class="p">,:</span><span class="n">BARCELONA</span><span class="p">);</span> 
  <span class="n">Route</span><span class="p">(:</span><span class="n">smartphone</span><span class="p">,:</span><span class="n">PARIS</span><span class="p">,:</span><span class="n">SINGAPORE</span><span class="p">);</span>
  <span class="n">Route</span><span class="p">(:</span><span class="n">smartphone</span><span class="p">,:</span><span class="n">PARIS</span><span class="p">,:</span><span class="n">NEWYORK</span><span class="p">);</span>
  <span class="n">Route</span><span class="p">(:</span><span class="n">smartphone</span><span class="p">,:</span><span class="n">PARIS</span><span class="p">,:</span><span class="n">ISTANBUL</span><span class="p">);</span>
  <span class="n">Route</span><span class="p">(:</span><span class="n">smartphone</span><span class="p">,:</span><span class="n">PARIS</span><span class="p">,:</span><span class="n">DUBAI</span><span class="p">);</span>
  <span class="n">Route</span><span class="p">(:</span><span class="n">smartphone</span><span class="p">,:</span><span class="n">PARIS</span><span class="p">,:</span><span class="n">KUALALUMPUR</span><span class="p">);</span>
  <span class="n">Route</span><span class="p">(:</span><span class="n">smartphone</span><span class="p">,:</span><span class="n">PARIS</span><span class="p">,:</span><span class="n">HONGKONG</span><span class="p">);</span>
  <span class="n">Route</span><span class="p">(:</span><span class="n">smartphone</span><span class="p">,:</span><span class="n">PARIS</span><span class="p">,:</span><span class="n">BARCELONA</span><span class="p">);</span> 

  <span class="n">Route</span><span class="p">(:</span><span class="n">tablet</span><span class="p">,:</span><span class="n">BANGKOK</span><span class="p">,:</span><span class="n">SINGAPORE</span><span class="p">);</span>
  <span class="n">Route</span><span class="p">(:</span><span class="n">tablet</span><span class="p">,:</span><span class="n">BANGKOK</span><span class="p">,:</span><span class="n">NEWYORK</span><span class="p">);</span>
  <span class="n">Route</span><span class="p">(:</span><span class="n">tablet</span><span class="p">,:</span><span class="n">BANGKOK</span><span class="p">,:</span><span class="n">ISTANBUL</span><span class="p">);</span>
  <span class="n">Route</span><span class="p">(:</span><span class="n">tablet</span><span class="p">,:</span><span class="n">BANGKOK</span><span class="p">,:</span><span class="n">DUBAI</span><span class="p">);</span>
  <span class="n">Route</span><span class="p">(:</span><span class="n">tablet</span><span class="p">,:</span><span class="n">BANGKOK</span><span class="p">,:</span><span class="n">KUALALUMPUR</span><span class="p">);</span>
  <span class="n">Route</span><span class="p">(:</span><span class="n">tablet</span><span class="p">,:</span><span class="n">BANGKOK</span><span class="p">,:</span><span class="n">HONGKONG</span><span class="p">);</span>
  <span class="n">Route</span><span class="p">(:</span><span class="n">tablet</span><span class="p">,:</span><span class="n">BANGKOK</span><span class="p">,:</span><span class="n">BARCELONA</span><span class="p">);</span> 

  <span class="n">Route</span><span class="p">(:</span><span class="n">tablet</span><span class="p">,:</span><span class="n">LONDON</span><span class="p">,:</span><span class="n">SINGAPORE</span><span class="p">);</span>
  <span class="n">Route</span><span class="p">(:</span><span class="n">tablet</span><span class="p">,:</span><span class="n">LONDON</span><span class="p">,:</span><span class="n">NEWYORK</span><span class="p">);</span>
  <span class="n">Route</span><span class="p">(:</span><span class="n">tablet</span><span class="p">,:</span><span class="n">LONDON</span><span class="p">,:</span><span class="n">ISTANBUL</span><span class="p">);</span>
  <span class="n">Route</span><span class="p">(:</span><span class="n">tablet</span><span class="p">,:</span><span class="n">LONDON</span><span class="p">,:</span><span class="n">DUBAI</span><span class="p">);</span>
  <span class="n">Route</span><span class="p">(:</span><span class="n">tablet</span><span class="p">,:</span><span class="n">LONDON</span><span class="p">,:</span><span class="n">KUALALUMPUR</span><span class="p">);</span>
  <span class="n">Route</span><span class="p">(:</span><span class="n">tablet</span><span class="p">,:</span><span class="n">LONDON</span><span class="p">,:</span><span class="n">HONGKONG</span><span class="p">);</span>
  <span class="n">Route</span><span class="p">(:</span><span class="n">tablet</span><span class="p">,:</span><span class="n">LONDON</span><span class="p">,:</span><span class="n">BARCELONA</span><span class="p">);</span> 

  <span class="n">Route</span><span class="p">(:</span><span class="n">tablet</span><span class="p">,:</span><span class="n">PARIS</span><span class="p">,:</span><span class="n">SINGAPORE</span><span class="p">);</span>
  <span class="n">Route</span><span class="p">(:</span><span class="n">tablet</span><span class="p">,:</span><span class="n">PARIS</span><span class="p">,:</span><span class="n">NEWYORK</span><span class="p">);</span>
  <span class="n">Route</span><span class="p">(:</span><span class="n">tablet</span><span class="p">,:</span><span class="n">PARIS</span><span class="p">,:</span><span class="n">ISTANBUL</span><span class="p">);</span>
  <span class="n">Route</span><span class="p">(:</span><span class="n">tablet</span><span class="p">,:</span><span class="n">PARIS</span><span class="p">,:</span><span class="n">DUBAI</span><span class="p">);</span>
  <span class="n">Route</span><span class="p">(:</span><span class="n">tablet</span><span class="p">,:</span><span class="n">PARIS</span><span class="p">,:</span><span class="n">KUALALUMPUR</span><span class="p">);</span>
  <span class="n">Route</span><span class="p">(:</span><span class="n">tablet</span><span class="p">,:</span><span class="n">PARIS</span><span class="p">,:</span><span class="n">HONGKONG</span><span class="p">);</span>
  <span class="n">Route</span><span class="p">(:</span><span class="n">tablet</span><span class="p">,:</span><span class="n">PARIS</span><span class="p">,:</span><span class="n">BARCELONA</span><span class="p">);</span> 

  <span class="n">Route</span><span class="p">(:</span><span class="n">laptop</span><span class="p">,:</span><span class="n">BANGKOK</span><span class="p">,:</span><span class="n">SINGAPORE</span><span class="p">);</span>
  <span class="n">Route</span><span class="p">(:</span><span class="n">laptop</span><span class="p">,:</span><span class="n">BANGKOK</span><span class="p">,:</span><span class="n">NEWYORK</span><span class="p">);</span>
  <span class="n">Route</span><span class="p">(:</span><span class="n">laptop</span><span class="p">,:</span><span class="n">BANGKOK</span><span class="p">,:</span><span class="n">ISTANBUL</span><span class="p">);</span>
  <span class="n">Route</span><span class="p">(:</span><span class="n">laptop</span><span class="p">,:</span><span class="n">BANGKOK</span><span class="p">,:</span><span class="n">DUBAI</span><span class="p">);</span>
  <span class="n">Route</span><span class="p">(:</span><span class="n">laptop</span><span class="p">,:</span><span class="n">BANGKOK</span><span class="p">,:</span><span class="n">KUALALUMPUR</span><span class="p">);</span>
  <span class="n">Route</span><span class="p">(:</span><span class="n">laptop</span><span class="p">,:</span><span class="n">BANGKOK</span><span class="p">,:</span><span class="n">HONGKONG</span><span class="p">);</span>
  <span class="n">Route</span><span class="p">(:</span><span class="n">laptop</span><span class="p">,:</span><span class="n">BANGKOK</span><span class="p">,:</span><span class="n">BARCELONA</span><span class="p">);</span> 

  <span class="n">Route</span><span class="p">(:</span><span class="n">laptop</span><span class="p">,:</span><span class="n">LONDON</span><span class="p">,:</span><span class="n">SINGAPORE</span><span class="p">);</span>
  <span class="n">Route</span><span class="p">(:</span><span class="n">laptop</span><span class="p">,:</span><span class="n">LONDON</span><span class="p">,:</span><span class="n">NEWYORK</span><span class="p">);</span>
  <span class="n">Route</span><span class="p">(:</span><span class="n">laptop</span><span class="p">,:</span><span class="n">LONDON</span><span class="p">,:</span><span class="n">ISTANBUL</span><span class="p">);</span>
  <span class="n">Route</span><span class="p">(:</span><span class="n">laptop</span><span class="p">,:</span><span class="n">LONDON</span><span class="p">,:</span><span class="n">DUBAI</span><span class="p">);</span>
  <span class="n">Route</span><span class="p">(:</span><span class="n">laptop</span><span class="p">,:</span><span class="n">LONDON</span><span class="p">,:</span><span class="n">KUALALUMPUR</span><span class="p">);</span>
  <span class="n">Route</span><span class="p">(:</span><span class="n">laptop</span><span class="p">,:</span><span class="n">LONDON</span><span class="p">,:</span><span class="n">HONGKONG</span><span class="p">);</span>
  <span class="n">Route</span><span class="p">(:</span><span class="n">laptop</span><span class="p">,:</span><span class="n">LONDON</span><span class="p">,:</span><span class="n">BARCELONA</span><span class="p">);</span> 

  <span class="n">Route</span><span class="p">(:</span><span class="n">laptop</span><span class="p">,:</span><span class="n">PARIS</span><span class="p">,:</span><span class="n">SINGAPORE</span><span class="p">);</span>
  <span class="n">Route</span><span class="p">(:</span><span class="n">laptop</span><span class="p">,:</span><span class="n">PARIS</span><span class="p">,:</span><span class="n">NEWYORK</span><span class="p">);</span>
  <span class="n">Route</span><span class="p">(:</span><span class="n">laptop</span><span class="p">,:</span><span class="n">PARIS</span><span class="p">,:</span><span class="n">ISTANBUL</span><span class="p">);</span>
  <span class="n">Route</span><span class="p">(:</span><span class="n">laptop</span><span class="p">,:</span><span class="n">PARIS</span><span class="p">,:</span><span class="n">DUBAI</span><span class="p">);</span>
  <span class="n">Route</span><span class="p">(:</span><span class="n">laptop</span><span class="p">,:</span><span class="n">PARIS</span><span class="p">,:</span><span class="n">KUALALUMPUR</span><span class="p">);</span>
  <span class="n">Route</span><span class="p">(:</span><span class="n">laptop</span><span class="p">,:</span><span class="n">PARIS</span><span class="p">,:</span><span class="n">HONGKONG</span><span class="p">);</span>
  <span class="n">Route</span><span class="p">(:</span><span class="n">laptop</span><span class="p">,:</span><span class="n">PARIS</span><span class="p">,:</span><span class="n">BARCELONA</span><span class="p">);</span> 
<span class="p">]</span>

<span class="k">immutable</span> <span class="n">Supply</span>
    <span class="n">p</span><span class="p">::</span><span class="n">Symbol</span>
    <span class="n">o</span><span class="p">::</span><span class="n">Symbol</span>
<span class="k">end</span>

<span class="c">#Creating the array supplies</span>
<span class="c">#                   --------</span>
<span class="n">supplies</span> <span class="o">=</span> <span class="n">Supply</span><span class="p">[]</span> <span class="c"># Creates a 0 element array of immutable type Supply</span>
<span class="k">for</span> <span class="n">r</span> <span class="k">in</span> <span class="n">routes</span>
    <span class="n">push</span><span class="o">!</span><span class="p">(</span><span class="n">supplies</span><span class="p">,</span> <span class="n">Supply</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">p</span><span class="p">,</span> <span class="n">r</span><span class="o">.</span><span class="n">o</span><span class="p">))</span>
<span class="k">end</span>

<span class="c"># Creating suppliedAmount dictionary</span>
<span class="c">#          --------------</span>
<span class="c">#It might be better to create this as a dictionary, where the key is the </span>
<span class="c"># element of the array supplies and the value is the corresponding supplied</span>
<span class="c">#amount</span>


<span class="n">suppliedAmount</span> <span class="o">=</span> <span class="n">Dict</span><span class="p">{</span><span class="n">Supply</span><span class="p">,</span> <span class="kt">Float64</span><span class="p">}()</span>
<span class="k">for</span> <span class="n">s</span> <span class="k">in</span> <span class="n">supplies</span>
    <span class="k">if</span> <span class="n">s</span><span class="o">.</span><span class="n">p</span> <span class="o">==</span> <span class="p">:</span><span class="n">smartphone</span> <span class="o">&amp;&amp;</span> <span class="n">s</span><span class="o">.</span><span class="n">o</span> <span class="o">==</span> <span class="p">:</span><span class="n">LONDON</span>
        <span class="n">push</span><span class="o">!</span><span class="p">(</span><span class="n">suppliedAmount</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="mi">800</span><span class="p">)</span>
        <span class="k">elseif</span> <span class="n">s</span><span class="o">.</span><span class="n">p</span> <span class="o">==</span> <span class="p">:</span><span class="n">smartphone</span> <span class="o">&amp;&amp;</span> <span class="n">s</span><span class="o">.</span><span class="n">o</span><span class="o">==</span><span class="p">:</span><span class="n">BANGKOK</span>
        <span class="n">push</span><span class="o">!</span><span class="p">(</span><span class="n">suppliedAmount</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="mi">500</span><span class="p">)</span>
        <span class="k">elseif</span> <span class="n">s</span><span class="o">.</span><span class="n">p</span> <span class="o">==</span> <span class="p">:</span><span class="n">smartphone</span> <span class="o">&amp;&amp;</span> <span class="n">s</span><span class="o">.</span><span class="n">o</span><span class="o">==</span><span class="p">:</span><span class="n">PARIS</span>
        <span class="n">push</span><span class="o">!</span><span class="p">(</span><span class="n">suppliedAmount</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span><span class="mi">600</span><span class="p">)</span>
        <span class="k">elseif</span> <span class="n">s</span><span class="o">.</span><span class="n">p</span> <span class="o">==</span> <span class="p">:</span><span class="n">tablet</span> <span class="o">&amp;&amp;</span> <span class="n">s</span><span class="o">.</span><span class="n">o</span><span class="o">==</span><span class="p">:</span><span class="n">BANGKOK</span>
        <span class="n">push</span><span class="o">!</span><span class="p">(</span><span class="n">suppliedAmount</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
        <span class="k">elseif</span> <span class="n">s</span><span class="o">.</span><span class="n">p</span> <span class="o">==</span> <span class="p">:</span><span class="n">tablet</span> <span class="o">&amp;&amp;</span> <span class="n">s</span><span class="o">.</span><span class="n">o</span><span class="o">==</span><span class="p">:</span><span class="n">LONDON</span>
        <span class="n">push</span><span class="o">!</span><span class="p">(</span><span class="n">suppliedAmount</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="mi">1500</span><span class="p">)</span>
        <span class="k">elseif</span> <span class="n">s</span><span class="o">.</span><span class="n">p</span> <span class="o">==</span> <span class="p">:</span><span class="n">tablet</span> <span class="o">&amp;&amp;</span> <span class="n">s</span><span class="o">.</span><span class="n">o</span> <span class="o">==</span> <span class="p">:</span><span class="n">PARIS</span>
        <span class="n">push</span><span class="o">!</span><span class="p">(</span><span class="n">suppliedAmount</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="mi">1700</span><span class="p">)</span>
        <span class="k">elseif</span> <span class="n">s</span><span class="o">.</span><span class="n">p</span> <span class="o">==</span> <span class="p">:</span><span class="n">laptop</span> <span class="o">&amp;&amp;</span> <span class="n">s</span><span class="o">.</span><span class="n">o</span> <span class="o">==</span> <span class="p">:</span><span class="n">BANGKOK</span>
        <span class="n">push</span><span class="o">!</span><span class="p">(</span><span class="n">suppliedAmount</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="mi">150</span><span class="p">)</span>
        <span class="k">elseif</span> <span class="n">s</span><span class="o">.</span><span class="n">p</span> <span class="o">==</span> <span class="p">:</span><span class="n">laptop</span> <span class="o">&amp;&amp;</span> <span class="n">s</span><span class="o">.</span><span class="n">o</span> <span class="o">==</span> <span class="p">:</span><span class="n">LONDON</span>
        <span class="n">push</span><span class="o">!</span><span class="p">(</span><span class="n">suppliedAmount</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="mi">250</span><span class="p">)</span>
        <span class="k">elseif</span> <span class="n">s</span><span class="o">.</span><span class="n">p</span> <span class="o">==</span> <span class="p">:</span><span class="n">laptop</span> <span class="o">&amp;&amp;</span> <span class="n">s</span><span class="o">.</span><span class="n">o</span> <span class="o">==</span> <span class="p">:</span><span class="n">PARIS</span>
        <span class="n">push</span><span class="o">!</span><span class="p">(</span><span class="n">suppliedAmount</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="mi">400</span><span class="p">)</span>
    <span class="k">else</span>
        <span class="n">push</span><span class="o">!</span><span class="p">(</span><span class="n">suppliedAmount</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>  
<span class="k">end</span> <span class="c">#if</span>
<span class="k">end</span> <span class="c">#for</span>

<span class="k">immutable</span> <span class="n">Customer</span>
    <span class="n">p</span><span class="p">::</span><span class="n">Symbol</span>
    <span class="n">d</span><span class="p">::</span><span class="n">Symbol</span>
<span class="k">end</span>

<span class="c"># Creating customers array, which is an array of custom immutable Customer </span>
<span class="c">#          ---------</span>
<span class="n">customers</span> <span class="o">=</span> <span class="n">Customer</span><span class="p">[]</span>
<span class="k">for</span> <span class="n">r</span> <span class="k">in</span> <span class="n">routes</span>
    <span class="n">push</span><span class="o">!</span><span class="p">(</span><span class="n">customers</span><span class="p">,</span> <span class="n">Customer</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">p</span><span class="p">,</span> <span class="n">r</span><span class="o">.</span><span class="n">d</span><span class="p">))</span>
<span class="k">end</span>

<span class="n">demandedAmount</span> <span class="o">=</span> <span class="n">Dict</span><span class="p">{</span><span class="n">Customer</span><span class="p">,</span> <span class="kt">Float64</span><span class="p">}()</span>
<span class="k">for</span> <span class="n">c</span> <span class="k">in</span> <span class="n">customers</span>
<span class="c">#1</span>
    <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">p</span><span class="o">==</span><span class="p">:</span><span class="n">smartphone</span> <span class="o">&amp;&amp;</span> <span class="n">c</span><span class="o">.</span><span class="n">d</span><span class="o">==</span><span class="p">:</span><span class="n">SINGAPORE</span>
        <span class="n">push</span><span class="o">!</span><span class="p">(</span><span class="n">demandedAmount</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="mi">400</span><span class="p">)</span> 
<span class="c">#2</span>
        <span class="k">elseif</span> <span class="n">c</span><span class="o">.</span><span class="n">p</span><span class="o">==</span><span class="p">:</span><span class="n">tablet</span> <span class="o">&amp;&amp;</span> <span class="n">c</span><span class="o">.</span><span class="n">d</span><span class="o">==</span><span class="p">:</span><span class="n">SINGAPORE</span>
        <span class="n">push</span><span class="o">!</span><span class="p">(</span><span class="n">demandedAmount</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="mi">600</span><span class="p">)</span> 
<span class="c">#3</span>
        <span class="k">elseif</span> <span class="n">c</span><span class="o">.</span><span class="n">p</span><span class="o">==</span><span class="p">:</span><span class="n">laptop</span> <span class="o">&amp;&amp;</span> <span class="n">c</span><span class="o">.</span><span class="n">d</span><span class="o">==</span><span class="p">:</span><span class="n">SINGAPORE</span>
        <span class="n">push</span><span class="o">!</span><span class="p">(</span><span class="n">demandedAmount</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="mi">90</span><span class="p">)</span> 
<span class="c">#4</span>
        <span class="k">elseif</span> <span class="n">c</span><span class="o">.</span><span class="n">p</span><span class="o">==</span><span class="p">:</span><span class="n">smartphone</span> <span class="o">&amp;&amp;</span> <span class="n">c</span><span class="o">.</span><span class="n">d</span><span class="o">==</span><span class="p">:</span><span class="n">NEWYORK</span>
        <span class="n">push</span><span class="o">!</span><span class="p">(</span><span class="n">demandedAmount</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span> 
<span class="c">#5</span>
        <span class="k">elseif</span> <span class="n">c</span><span class="o">.</span><span class="n">p</span><span class="o">==</span><span class="p">:</span><span class="n">tablet</span> <span class="o">&amp;&amp;</span> <span class="n">c</span><span class="o">.</span><span class="n">d</span><span class="o">==</span><span class="p">:</span><span class="n">NEWYORK</span>
        <span class="n">push</span><span class="o">!</span><span class="p">(</span><span class="n">demandedAmount</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="mi">650</span><span class="p">)</span> 
<span class="c">#6</span>
        <span class="k">elseif</span> <span class="n">c</span><span class="o">.</span><span class="n">p</span><span class="o">==</span><span class="p">:</span><span class="n">laptop</span> <span class="o">&amp;&amp;</span> <span class="n">c</span><span class="o">.</span><span class="n">d</span><span class="o">==</span><span class="p">:</span><span class="n">NEWYORK</span> 
        <span class="n">push</span><span class="o">!</span><span class="p">(</span><span class="n">demandedAmount</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="mi">110</span><span class="p">)</span> 
<span class="c">#7</span>
        <span class="k">elseif</span> <span class="n">c</span><span class="o">.</span><span class="n">p</span><span class="o">==</span><span class="p">:</span><span class="n">smartphone</span> <span class="o">&amp;&amp;</span> <span class="n">c</span><span class="o">.</span><span class="n">d</span><span class="o">==</span><span class="p">:</span><span class="n">ISTANBUL</span>
        <span class="n">push</span><span class="o">!</span><span class="p">(</span><span class="n">demandedAmount</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span> 
<span class="c">#8</span>
        <span class="k">elseif</span> <span class="n">c</span><span class="o">.</span><span class="n">p</span><span class="o">==</span><span class="p">:</span><span class="n">tablet</span> <span class="o">&amp;&amp;</span> <span class="n">c</span><span class="o">.</span><span class="n">d</span><span class="o">==</span><span class="p">:</span><span class="n">ISTANBUL</span>
        <span class="n">push</span><span class="o">!</span><span class="p">(</span><span class="n">demandedAmount</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="mi">300</span><span class="p">)</span> 
<span class="c">#9</span>
        <span class="k">elseif</span> <span class="n">c</span><span class="o">.</span><span class="n">p</span><span class="o">==</span><span class="p">:</span><span class="n">laptop</span> <span class="o">&amp;&amp;</span> <span class="n">c</span><span class="o">.</span><span class="n">d</span><span class="o">==</span><span class="p">:</span><span class="n">ISTANBUL</span>
        <span class="n">push</span><span class="o">!</span><span class="p">(</span><span class="n">demandedAmount</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> 
<span class="c">#10</span>
        <span class="k">elseif</span> <span class="n">c</span><span class="o">.</span><span class="n">p</span><span class="o">==</span><span class="p">:</span><span class="n">smartphone</span> <span class="o">&amp;&amp;</span> <span class="n">c</span><span class="o">.</span><span class="n">d</span><span class="o">==</span><span class="p">:</span><span class="n">DUBAI</span>
        <span class="n">push</span><span class="o">!</span><span class="p">(</span><span class="n">demandedAmount</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="mi">175</span><span class="p">)</span>  
<span class="c">#11</span>
    <span class="k">elseif</span> <span class="n">c</span><span class="o">.</span><span class="n">p</span><span class="o">==</span><span class="p">:</span><span class="n">tablet</span> <span class="o">&amp;&amp;</span> <span class="n">c</span><span class="o">.</span><span class="n">d</span><span class="o">==</span><span class="p">:</span><span class="n">DUBAI</span>
        <span class="n">push</span><span class="o">!</span><span class="p">(</span><span class="n">demandedAmount</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span>  <span class="mi">350</span><span class="p">)</span> 
<span class="c">#12</span>
    <span class="k">elseif</span> <span class="n">c</span><span class="o">.</span><span class="n">p</span><span class="o">==</span><span class="p">:</span><span class="n">laptop</span> <span class="o">&amp;&amp;</span> <span class="n">c</span><span class="o">.</span><span class="n">d</span><span class="o">==</span><span class="p">:</span><span class="n">DUBAI</span>
        <span class="n">push</span><span class="o">!</span><span class="p">(</span><span class="n">demandedAmount</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="mi">65</span><span class="p">)</span>
<span class="c">#13</span>
    <span class="k">elseif</span> <span class="n">c</span><span class="o">.</span><span class="n">p</span><span class="o">==</span><span class="p">:</span><span class="n">smartphone</span> <span class="o">&amp;&amp;</span> <span class="n">c</span><span class="o">.</span><span class="n">d</span><span class="o">==</span><span class="p">:</span><span class="n">KUALALUMPUR</span>
        <span class="n">push</span><span class="o">!</span><span class="p">(</span><span class="n">demandedAmount</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="mi">550</span><span class="p">)</span>
<span class="c">#14</span>
    <span class="k">elseif</span> <span class="n">c</span><span class="o">.</span><span class="n">p</span><span class="o">==</span><span class="p">:</span><span class="n">tablet</span> <span class="o">&amp;&amp;</span> <span class="n">c</span><span class="o">.</span><span class="n">d</span><span class="o">==</span><span class="p">:</span><span class="n">KUALALUMPUR</span>
        <span class="n">push</span><span class="o">!</span><span class="p">(</span><span class="n">demandedAmount</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="mi">950</span><span class="p">)</span>
<span class="c">#15</span>
    <span class="k">elseif</span> <span class="n">c</span><span class="o">.</span><span class="n">p</span><span class="o">==</span><span class="p">:</span><span class="n">laptop</span> <span class="o">&amp;&amp;</span> <span class="n">c</span><span class="o">.</span><span class="n">d</span><span class="o">==</span><span class="p">:</span><span class="n">KUALALUMPUR</span>
        <span class="n">push</span><span class="o">!</span><span class="p">(</span><span class="n">demandedAmount</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="mi">185</span><span class="p">)</span> 
<span class="c">#16</span>
    <span class="k">elseif</span> <span class="n">c</span><span class="o">.</span><span class="n">p</span><span class="o">==</span><span class="p">:</span><span class="n">smartphone</span> <span class="o">&amp;&amp;</span> <span class="n">c</span><span class="o">.</span><span class="n">d</span><span class="o">==</span><span class="p">:</span><span class="n">HONGKONG</span>
        <span class="n">push</span><span class="o">!</span><span class="p">(</span><span class="n">demandedAmount</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span>
<span class="c">#17</span>
    <span class="k">elseif</span> <span class="n">c</span><span class="o">.</span><span class="n">p</span><span class="o">==</span><span class="p">:</span><span class="n">tablet</span> <span class="o">&amp;&amp;</span> <span class="n">c</span><span class="o">.</span><span class="n">d</span><span class="o">==</span><span class="p">:</span><span class="n">HONGKONG</span>
        <span class="n">push</span><span class="o">!</span><span class="p">(</span><span class="n">demandedAmount</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="mi">750</span><span class="p">)</span>
<span class="c">#18</span>
    <span class="k">elseif</span> <span class="n">c</span><span class="o">.</span><span class="n">p</span><span class="o">==</span><span class="p">:</span><span class="n">laptop</span> <span class="o">&amp;&amp;</span> <span class="n">c</span><span class="o">.</span><span class="n">d</span><span class="o">==</span><span class="p">:</span><span class="n">HONGKONG</span>
        <span class="n">push</span><span class="o">!</span><span class="p">(</span><span class="n">demandedAmount</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="mi">150</span><span class="p">)</span>
<span class="c">#19</span>
    <span class="k">elseif</span> <span class="n">c</span><span class="o">.</span><span class="n">p</span><span class="o">==</span><span class="p">:</span><span class="n">smartphone</span> <span class="o">&amp;&amp;</span> <span class="n">c</span><span class="o">.</span><span class="n">d</span><span class="o">==</span><span class="p">:</span><span class="n">BARCELONA</span>
        <span class="n">push</span><span class="o">!</span><span class="p">(</span><span class="n">demandedAmount</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="mi">275</span><span class="p">)</span>
<span class="c">#20</span>
    <span class="k">elseif</span> <span class="n">c</span><span class="o">.</span><span class="n">p</span><span class="o">==</span><span class="p">:</span><span class="n">tablet</span> <span class="o">&amp;&amp;</span> <span class="n">c</span><span class="o">.</span><span class="n">d</span><span class="o">==</span><span class="p">:</span><span class="n">BARCELONA</span>
        <span class="n">push</span><span class="o">!</span><span class="p">(</span><span class="n">demandedAmount</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="mi">600</span><span class="p">)</span>
<span class="c">#21   </span>
    <span class="k">elseif</span> <span class="n">c</span><span class="o">.</span><span class="n">p</span><span class="o">==</span><span class="p">:</span><span class="n">laptop</span> <span class="o">&amp;&amp;</span> <span class="n">c</span><span class="o">.</span><span class="n">d</span><span class="o">==</span><span class="p">:</span><span class="n">BARCELONA</span>
        <span class="n">push</span><span class="o">!</span><span class="p">(</span><span class="n">demandedAmount</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span>
    <span class="k">else</span>
        <span class="n">push</span><span class="o">!</span><span class="p">(</span><span class="n">demandedAmount</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">println</span><span class="p">(</span><span class="s">&quot;Something is wrong index&quot;</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="s">&quot;with customers&quot;</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>
    <span class="k">end</span>
<span class="k">end</span>

<span class="n">costCof</span> <span class="o">=</span> 
<span class="p">[</span><span class="mi">34</span><span class="p">;</span> <span class="mi">7</span><span class="p">;</span> <span class="mi">8</span><span class="p">;</span> <span class="mi">10</span><span class="p">;</span> <span class="mi">11</span><span class="p">;</span> <span class="mi">74</span><span class="p">;</span> <span class="mi">9</span><span class="p">;</span> <span class="mi">18</span><span class="p">;</span> <span class="mi">5</span><span class="p">;</span> <span class="mi">15</span><span class="p">;</span> <span class="mi">6</span><span class="p">;</span> <span class="mi">23</span><span class="p">;</span> <span class="mi">81</span><span class="p">;</span> <span class="mi">18</span><span class="p">;</span> <span class="mi">20</span><span class="p">;</span> <span class="mi">10</span><span class="p">;</span> <span class="mi">9</span><span class="p">;</span> 
 <span class="mi">13</span><span class="p">;</span> <span class="mi">25</span><span class="p">;</span> <span class="mi">85</span><span class="p">;</span> <span class="mi">13</span><span class="p">;</span> <span class="mi">40</span><span class="p">;</span> <span class="mi">17</span><span class="p">;</span> <span class="mi">7</span><span class="p">;</span> <span class="mi">16</span><span class="p">;</span> <span class="mi">20</span><span class="p">;</span> <span class="mi">80</span><span class="p">;</span> <span class="mi">9</span><span class="p">;</span> <span class="mi">24</span><span class="p">;</span> <span class="mi">5</span><span class="p">;</span> <span class="mi">15</span><span class="p">;</span> <span class="mi">11</span><span class="p">;</span> <span class="mi">23</span><span class="p">;</span> 
<span class="mi">90</span><span class="p">;</span> <span class="mi">22</span><span class="p">;</span> <span class="mi">19</span><span class="p">;</span> <span class="mi">15</span><span class="p">;</span> <span class="mi">16</span><span class="p">;</span> <span class="mi">15</span><span class="p">;</span> <span class="mi">24</span><span class="p">;</span> <span class="mi">100</span><span class="p">;</span> <span class="mi">21</span><span class="p">;</span> <span class="mi">37</span><span class="p">;</span> <span class="mi">12</span><span class="p">;</span> <span class="mi">9</span><span class="p">;</span> <span class="mi">16</span><span class="p">;</span> <span class="mi">14</span><span class="p">;</span> 
<span class="mi">88</span><span class="p">;</span> <span class="mi">9</span><span class="p">;</span> <span class="mi">28</span><span class="p">;</span> <span class="mi">13</span><span class="p">;</span> <span class="mi">17</span><span class="p">;</span> <span class="mi">8</span><span class="p">;</span> <span class="mi">32</span><span class="p">;</span> <span class="mi">100</span><span class="p">;</span> <span class="mi">18</span><span class="p">;</span> <span class="mi">28</span><span class="p">;</span> <span class="mi">15</span><span class="p">;</span> <span class="mi">18</span><span class="p">;</span> <span class="mi">16</span><span class="p">;</span> <span class="mi">30</span><span class="p">;</span> <span class="mi">102</span><span class="p">;</span> <span class="mi">15</span><span class="p">]</span>

<span class="c"># Creating costRoutes dictionary which contains</span>
<span class="c">#          ----------</span>
<span class="n">costRoutes</span><span class="o">=</span><span class="n">Dict</span><span class="p">{</span><span class="n">Route</span><span class="p">,</span> <span class="kt">Float64</span><span class="p">}()</span>
<span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="n">length</span><span class="p">(</span><span class="n">routes</span><span class="p">)]</span>
    <span class="n">push</span><span class="o">!</span><span class="p">(</span><span class="n">costRoutes</span><span class="p">,</span> <span class="n">routes</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">costCof</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
<span class="k">end</span>

<span class="c"># Creating orig, which takes the product as the input and gives the set of origins of that product</span>
<span class="c">#          ----</span>
<span class="n">orig</span> <span class="o">=</span> <span class="n">Dict</span><span class="p">{</span><span class="n">Symbol</span><span class="p">,</span> <span class="n">Array</span><span class="p">}()</span>
<span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="n">length</span><span class="p">(</span><span class="n">products</span><span class="p">)]</span>
    <span class="n">dummy_array</span> <span class="o">=</span> <span class="n">Symbol</span><span class="p">[]</span>
  <span class="k">for</span> <span class="n">j</span> <span class="k">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="n">length</span><span class="p">(</span><span class="n">routes</span><span class="p">)]</span>
        <span class="c">#println(i, j, products[i] == routes[j].p)</span>
        <span class="k">if</span> <span class="n">products</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">routes</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">p</span>
            <span class="n">push</span><span class="o">!</span><span class="p">(</span><span class="n">dummy_array</span><span class="p">,</span> <span class="n">routes</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">o</span><span class="p">)</span>
            <span class="c">#println(orig[products[i]])</span>
        <span class="k">else</span> 
        <span class="c">#println(&quot;Oops, something is not right&quot;)</span>
            <span class="k">end</span> <span class="c">#if</span>
        <span class="k">end</span> <span class="c">#for </span>
    <span class="n">push</span><span class="o">!</span><span class="p">(</span><span class="n">orig</span><span class="p">,</span><span class="n">products</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">unique</span><span class="p">(</span><span class="n">dummy_array</span><span class="p">))</span>
    <span class="k">end</span> <span class="c">#for</span>

<span class="c"># Creating dest, which takes the product as the input and gives the set of destinations of that product</span>
<span class="c">#          ----</span>
<span class="n">dest</span> <span class="o">=</span> <span class="n">Dict</span><span class="p">{</span><span class="n">Symbol</span><span class="p">,</span> <span class="n">Array</span><span class="p">}()</span>
<span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="n">length</span><span class="p">(</span><span class="n">products</span><span class="p">)]</span>
    <span class="n">dummy_array</span> <span class="o">=</span> <span class="n">Symbol</span><span class="p">[]</span>
  <span class="k">for</span> <span class="n">j</span> <span class="k">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="n">length</span><span class="p">(</span><span class="n">routes</span><span class="p">)]</span>
        <span class="c">#println(i, j, products[i] == routes[j].p)</span>
        <span class="k">if</span> <span class="n">products</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">routes</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">p</span>
            <span class="n">push</span><span class="o">!</span><span class="p">(</span><span class="n">dummy_array</span><span class="p">,</span> <span class="n">routes</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">d</span><span class="p">)</span>
            <span class="c">#println(orig[products[i]])</span>
        <span class="k">else</span> 
        <span class="c">#println(&quot;Oops, something is not right&quot;)</span>
            <span class="k">end</span> <span class="c">#if</span>
        <span class="k">end</span> <span class="c">#for </span>
    <span class="n">push</span><span class="o">!</span><span class="p">(</span><span class="n">dest</span><span class="p">,</span><span class="n">products</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">unique</span><span class="p">(</span><span class="n">dummy_array</span><span class="p">))</span>
<span class="k">end</span> <span class="c">#for</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Model-File">Model File<a class="anchor-link" href="#Model-File">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[17]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-julia"><pre><span class="k">using</span> <span class="n">JuMP</span>  <span class="c"># Need to say it whenever we use JuMP</span>
<span class="c">#using CPLEX # Telling Julia what solver we are using </span>
<span class="k">using</span> <span class="n">GLPKMathProgInterface</span>

<span class="c">#MODEL CONSTRUCTION</span>
<span class="c">#------------------</span>
<span class="c"># transpModel = Model(solver=CplexSolver()) # Name of the model object</span>
<span class="n">transpModel</span> <span class="o">=</span> <span class="n">Model</span><span class="p">(</span><span class="n">solver</span><span class="o">=</span><span class="n">GLPKSolverLP</span><span class="p">())</span>

<span class="c">#VARIABLES</span>
<span class="c">#---------</span>
<span class="p">@</span><span class="n">defVar</span><span class="p">(</span><span class="n">transpModel</span><span class="p">,</span> <span class="n">trans</span><span class="p">[</span><span class="n">routes</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> 

<span class="c">#OBJECTIVE</span>
<span class="c">#---------</span>

<span class="p">@</span><span class="n">setObjective</span><span class="p">(</span><span class="n">transpModel</span><span class="p">,</span> <span class="n">Min</span><span class="p">,</span> <span class="n">sum</span><span class="p">{</span><span class="n">costRoutes</span><span class="p">[</span><span class="n">l</span><span class="p">]</span><span class="o">*</span><span class="n">trans</span><span class="p">[</span><span class="n">l</span><span class="p">],</span> <span class="n">l</span> <span class="k">in</span> <span class="n">routes</span><span class="p">})</span>

<span class="c">#Constraints</span>
<span class="c">#-----------</span>


<span class="c"># First Constraint</span>
<span class="c"># ----------------</span>

<span class="k">for</span> <span class="n">pr</span> <span class="k">in</span> <span class="n">products</span>
    <span class="k">for</span> <span class="n">org</span> <span class="k">in</span> <span class="n">orig</span><span class="p">[</span><span class="n">pr</span><span class="p">]</span>
        <span class="p">@</span><span class="n">addConstraint</span><span class="p">(</span><span class="n">transpModel</span><span class="p">,</span> <span class="n">sum</span><span class="p">{</span><span class="n">trans</span><span class="p">[</span><span class="n">Route</span><span class="p">(</span><span class="n">pr</span><span class="p">,</span> <span class="n">org</span><span class="p">,</span> <span class="n">de</span><span class="p">)],</span> <span class="n">de</span> <span class="k">in</span> <span class="n">dest</span><span class="p">[</span><span class="n">pr</span><span class="p">]}</span>
                       <span class="o">==</span>
                       <span class="n">suppliedAmount</span><span class="p">[</span><span class="n">Supply</span><span class="p">(</span><span class="n">pr</span><span class="p">,</span><span class="n">org</span><span class="p">)])</span>
    <span class="k">end</span>
<span class="k">end</span>

<span class="c">#Second Constraint</span>
<span class="c">#-----------------</span>

<span class="k">for</span> <span class="n">pr</span> <span class="k">in</span> <span class="n">products</span>
    <span class="k">for</span> <span class="n">de</span> <span class="k">in</span> <span class="n">dest</span><span class="p">[</span><span class="n">pr</span><span class="p">]</span>
        <span class="p">@</span><span class="n">addConstraint</span><span class="p">(</span><span class="n">transpModel</span><span class="p">,</span> <span class="n">sum</span><span class="p">{</span><span class="n">trans</span><span class="p">[</span><span class="n">Route</span><span class="p">(</span><span class="n">pr</span><span class="p">,</span> <span class="n">org</span><span class="p">,</span> <span class="n">de</span><span class="p">)],</span> <span class="n">org</span> <span class="k">in</span> <span class="n">orig</span><span class="p">[</span><span class="n">pr</span><span class="p">]}</span>
                       <span class="o">==</span>
        <span class="n">demandedAmount</span><span class="p">[</span><span class="n">Customer</span><span class="p">(</span><span class="n">pr</span><span class="p">,</span><span class="n">de</span><span class="p">)])</span>
    <span class="k">end</span>
<span class="k">end</span>

<span class="c"># Final constraint:</span>
<span class="c"># ----------------</span>
<span class="k">for</span> <span class="n">org</span> <span class="k">in</span> <span class="n">cities</span>
    <span class="k">for</span> <span class="n">de</span> <span class="k">in</span> <span class="n">cities</span>
        <span class="k">if</span> <span class="n">org</span><span class="o">!=</span><span class="n">de</span>
        <span class="p">@</span><span class="n">addConstraint</span><span class="p">(</span><span class="n">transpModel</span><span class="p">,</span> 
        <span class="n">sum</span><span class="p">{</span>
            <span class="n">trans</span><span class="p">[</span><span class="n">r</span><span class="p">],</span> <span class="n">r</span> <span class="k">in</span> <span class="n">routes</span>
            <span class="p">;</span> <span class="n">r</span><span class="o">.</span><span class="n">o</span> <span class="o">==</span> <span class="n">org</span> <span class="o">&amp;&amp;</span> <span class="n">r</span><span class="o">.</span><span class="n">d</span><span class="o">==</span><span class="n">de</span> <span class="c"># This will be used as an filtering condition</span>
        <span class="p">}</span>
                       <span class="o">&lt;=</span>
        <span class="n">capacity</span><span class="p">)</span>
        <span class="k">else</span>
            <span class="k">continue</span>
        <span class="k">end</span>
    <span class="k">end</span>
<span class="k">end</span>

<span class="n">status</span><span class="o">=</span><span class="n">solve</span><span class="p">(</span><span class="n">transpModel</span><span class="p">)</span>

<span class="n">println</span><span class="p">(</span><span class="s">&quot;The optimal objective value is: &quot;</span><span class="p">,</span> <span class="n">getObjectiveValue</span><span class="p">(</span><span class="n">transpModel</span><span class="p">))</span>

<span class="n">println</span><span class="p">(</span><span class="s">&quot;The optimal solution is, trans= </span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">getValue</span><span class="p">(</span><span class="n">trans</span><span class="p">))</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>The optimal objective value is: 178330.0
The optimal solution is, trans= 
trans: 1 dimensions, 63 entries:
 [            Route(:laptop,:PARIS,:DUBAI)] = 0.0
 [        Route(:laptop,:LONDON,:HONGKONG)] = 150.0
 [      Route(:tablet,:BANGKOK,:BARCELONA)] = 435.0
 [         Route(:tablet,:LONDON,:NEWYORK)] = 650.0
 [        Route(:laptop,:BANGKOK,:NEWYORK)] = 0.0
 [        Route(:tablet,:PARIS,:SINGAPORE)] = 600.0
 [        Route(:smartphone,:PARIS,:DUBAI)] = 0.0
 [       Route(:tablet,:LONDON,:BARCELONA)] = 0.0
 [      Route(:smartphone,:PARIS,:NEWYORK)] = 150.0
 [    Route(:laptop,:BANGKOK,:KUALALUMPUR)] = 150.0
 [       Route(:smartphone,:LONDON,:DUBAI)] = 175.0
 [       Route(:laptop,:LONDON,:SINGAPORE)] = 35.0
 [      Route(:tablet,:PARIS,:KUALALUMPUR)] = 635.0
 [       Route(:tablet,:LONDON,:SINGAPORE)] = 0.0
 [  Route(:smartphone,:PARIS,:KUALALUMPUR)] = 30.0
 [        Route(:tablet,:LONDON,:ISTANBUL)] = 0.0
 [   Route(:smartphone,:BANGKOK,:HONGKONG)] = 0.0
 [     Route(:smartphone,:LONDON,:NEWYORK)] = 50.0
 [            Route(:tablet,:PARIS,:DUBAI)] = 0.0
 [           Route(:laptop,:LONDON,:DUBAI)] = 65.0
 [      Route(:laptop,:BANGKOK,:SINGAPORE)] = 0.0
 [     Route(:tablet,:LONDON,:KUALALUMPUR)] = 315.0
 [    Route(:tablet,:BANGKOK,:KUALALUMPUR)] = 0.0
 [    Route(:smartphone,:LONDON,:HONGKONG)] = 200.0
 [         Route(:tablet,:PARIS,:ISTANBUL)] = 300.0
 [     Route(:laptop,:LONDON,:KUALALUMPUR)] = 0.0
 [       Route(:laptop,:LONDON,:BARCELONA)] = 0.0
 [          Route(:laptop,:BANGKOK,:DUBAI)] = 0.0
 [        Route(:tablet,:BANGKOK,:NEWYORK)] = 0.0
 [        Route(:tablet,:PARIS,:BARCELONA)] = 165.0
 [   Route(:smartphone,:LONDON,:SINGAPORE)] = 355.0
 [   Route(:smartphone,:BANGKOK,:ISTANBUL)] = 0.0
 [  Route(:smartphone,:BANGKOK,:BARCELONA)] = 0.0
 [          Route(:tablet,:PARIS,:NEWYORK)] = 0.0
 [           Route(:tablet,:LONDON,:DUBAI)] = 350.0
 [      Route(:laptop,:BANGKOK,:BARCELONA)] = 0.0
 [         Route(:laptop,:LONDON,:NEWYORK)] = 0.0
 [        Route(:laptop,:LONDON,:ISTANBUL)] = -0.0
 [          Route(:laptop,:PARIS,:NEWYORK)] = 110.0
 [    Route(:smartphone,:PARIS,:BARCELONA)] = 275.0
 [         Route(:tablet,:PARIS,:HONGKONG)] = 0.0
 [    Route(:smartphone,:PARIS,:SINGAPORE)] = 45.0
 [      Route(:laptop,:PARIS,:KUALALUMPUR)] = 35.0
 [ Route(:smartphone,:LONDON,:KUALALUMPUR)] = 20.0
 [       Route(:tablet,:BANGKOK,:HONGKONG)] = 565.0
 [       Route(:laptop,:BANGKOK,:HONGKONG)] = 0.0
 [    Route(:smartphone,:LONDON,:ISTANBUL)] = 0.0
 [  Route(:smartphone,:BANGKOK,:SINGAPORE)] = 0.0
 [          Route(:tablet,:BANGKOK,:DUBAI)] = 0.0
 [       Route(:tablet,:BANGKOK,:ISTANBUL)] = 0.0
 [   Route(:smartphone,:LONDON,:BARCELONA)] = 0.0
 [      Route(:tablet,:BANGKOK,:SINGAPORE)] = 0.0
 [        Route(:laptop,:PARIS,:BARCELONA)] = 200.0
 [        Route(:tablet,:LONDON,:HONGKONG)] = 185.0
 [         Route(:laptop,:PARIS,:HONGKONG)] = 0.0
 [        Route(:laptop,:PARIS,:SINGAPORE)] = 55.0
 [       Route(:laptop,:BANGKOK,:ISTANBUL)] = 0.0
 [      Route(:smartphone,:BANGKOK,:DUBAI)] = 0.0
 [    Route(:smartphone,:BANGKOK,:NEWYORK)] = 0.0
 [Route(:smartphone,:BANGKOK,:KUALALUMPUR)] = 500.0
 [     Route(:smartphone,:PARIS,:ISTANBUL)] = 100.0
 [     Route(:smartphone,:PARIS,:HONGKONG)] = 0.0
 [         Route(:laptop,:PARIS,:ISTANBUL)] = 0.0
</pre>
</div>
</div>

</div>
</div>

</div>    </div> <!-- /container -->

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
    <!-- MathJax -->
    <script src='https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>
  </body>
</html>
